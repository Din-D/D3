<html>
	<head>
		<style>
			svg 
			{
				background-color : #F5EEEC;
			}			
		</style>
		<script src="https://d3js.org/d3.v5.min.js"></script>
	</head>
	<body>
		<script>
			const w = 1000 ;
			const h = 500 ;
			const margin = 75 ;
			
			const tidesDataSet = [
					["2/1/2019 00:00", 6],
					["2/1/2019 08:35", 13],
					["2/1/2019 14:10", 11],
					["2/1/2019 18:05", 12],					
					["2/2/2019 00:30", 3],
					["2/2/2019 10:20", 7],
					["2/2/2019 15:15", 13],
					["2/2/2019 19:30", 14],
					["2/2/2019 24:00", 7]					
				];
			
			const sunRiseSetTimes = [
					{'sunrise':"2/1/2019 06:16", 'sunset':"2/1/2019 19:32"},
					{'sunrise':"2/2/2019 07:20", 'sunset':"2/2/2019 18:42"}
				];
			
			const svg = d3.select("body")
			      .append("svg")
			      .attr("width",w)
			      .attr("height",h);
				  
				  //chart title
				  svg.append("text")
					 .attr("x", (w / 2))             
					 .attr("y", margin )
					 .attr("text-anchor", "middle")  
					 .style("font-size", "18px") 					  
					 .text("Tide Heights Across Two Days");					 
				 	
				 //X axis		
				 //@todo : title & unit, 24 instead of 00, 24th ticks darker,2 days marked at 0th tick,2 days from data set.
				 //2nd phase select 2 days across a week.
				 var parseTime = d3.timeParse("%m/%d/%Y %H:%M");
				 var xScale = d3.scaleTime()								 
								 .domain([parseTime("2/1/2019 00:00"), parseTime("2/2/2019 24:00")])
							     .range([margin,w - margin]) ;					 
				 svg.append("g")
					.attr("transform" , "translate(0," + (h - margin) + " )")					
					.call(d3.axisBottom(xScale).ticks(d3.timeHour.every(1)).tickFormat(d3.timeFormat("%H")))
					
				
				//x axis label
				svg.append("text")
				   .attr("transform","translate(" + (w - margin)  + "," + h + ")")
				   .style("text-anchor","middle")
				   .text("Date,Hour") ;
				
				//y axis
				//@todo : title & unit,highest,lowest from data set.
				//@2ndphase: drop down to select m,ft
				 var yScale = d3.scaleLinear()
								  .domain([0,20])
								  .range([h-margin,margin]);
				 svg.append("g")
					.call(d3.axisLeft(yScale).ticks(4))
					.attr("transform","translate(" + margin + ",0)");			
					
				
				//y axis label
				 svg.append("text")
					.attr("transform","translate(0," + margin * 0.75 + ")")
					.style("text-anchor","start")
					.text("Height (m)") ;
				
				
				//circles				
				 svg.selectAll('circle')
				  .data(tidesDataSet)
				  .enter()
				  .append('circle')
				  .attr('cx',function(d){					
					return xScale(parseTime(d[0]));
				  })
				  .attr('cy',function(d){
					return yScale(d[1]);
				  })
				  .attr('r',3)
				  .attr("fill", "green");
				  
				  //curve
				  /*
				  var lineGenerator = d3.line()
										.x(function(d){
											return xScale(parseTime(d[0]));
										})
										.y(function(d){
											return yScale(d[1]);
										})
										.curve(d3.curveCardinal)
										
					
				  var pathData = lineGenerator(tidesDataSet);			  
				 
				  svg.append('path')
				     .attr('d', pathData);		
				  */
				//area
				var areaGenerator = d3.area()				
									.x(function(d){
										return xScale(parseTime(d[0]));
									})
									.y0(function() {
										return yScale.range()[0];
									})
									.y1(function(d) {
										return yScale(d[1]);
									})
									.curve(d3.curveCardinal);
									
				 var areaData = areaGenerator(tidesDataSet);
				 /*
				 //One fill
				 svg.append('path')
				.attr('d', areaData)
				.attr('stroke', 'steelblue')
				.attr('stroke-width', 2)*/
				//.attr('fill', 'MediumAquaMarine');
				
				//Gradient
				//different shades for day time and night time. (@todo give exact positions too)
				var defs = svg.append("defs")
				var linearGradient = defs.append('linearGradient')
									.attr('id','gradient1')									
				linearGradient				
				.attr('x1','0%')
				.attr('y1','0%')
				.attr('x2','100%')							
				.attr('y2','0%');
				
				
				linearGradient.selectAll('stop')
					.data([
					{offset:'5%',color:'DarkOliveGreen'},
					{offset:'45%',color:'LightSeaGreen'},
					{offset:'75%',color:'DarkOliveGreen'},
					{offset:'100%',color:'LightSeaGreen'}
					])
					.enter()
					.append('stop')
					.attr('offset',function(d) {return d.offset})
					.attr('stop-color',function(d) {return d.color});
							
				svg.append('path')
				.attr('d',areaData)
				.attr('stroke','steelBlue')
				.attr('stroke-width', 2)
				.style("fill","url(#gradient1)");
		</script>
	</body>
</html>
